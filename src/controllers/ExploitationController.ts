import { ExploitationRepository } from "../repository/ExploitationRepository";

export class ExploitationController {
  static getAll (req, res) {
    ExploitationRepository.getAll().then(exploitations => {
      res.status(200).json({ code: 200, data: exploitations });
    }).catch(error => {
      console.error('[ExploitationController:getAll]', error);
      res.status(400).json({ code: 400, message: 'An Error occure !' });
    });
  }

  static getOne (req, res) {
    const params = req.params;

    if (params && params.hasOwnProperty('exploitationId')) {
      ExploitationRepository.getById(params.exploitationId).then(exploitation => {
        if (exploitation) {
          res.status(200).json({ code: 200, data: exploitation });
        } else {
          res.status(400).json({ code: 404, message: 'Not found !' });
        }
      }).catch(error => {
        console.error('[ExploitationController:getOne]', error);
        res.status(400).json({ code: 400, message: 'An Error occure !' });
      });
    } else {
      res.status(400).json({ code: 400, message: 'Attribute(s) missing !' });
    }
  }
}